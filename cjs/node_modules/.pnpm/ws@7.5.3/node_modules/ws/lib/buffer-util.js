"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,r=require("../../../../../../_virtual/buffer-util.js"),t=require("./constants.js");exports.__require=function(){if(e)return r.bufferUtil.exports;e=1;const{EMPTY_BUFFER:f}=t.__require();function u(e,r){if(0===e.length)return f;if(1===e.length)return e[0];const t=Buffer.allocUnsafe(r);let u=0;for(let r=0;r<e.length;r++){const f=e[r];t.set(f,u),u+=f.length}return u<r?t.slice(0,u):t}function n(e,r,t,f,u){for(let n=0;n<u;n++)t[f+n]=e[n]^r[3&n]}function o(e,r){const t=e.length;for(let f=0;f<t;f++)e[f]^=r[3&f]}function s(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function i(e){if(i.readOnly=!0,Buffer.isBuffer(e))return e;let r;return e instanceof ArrayBuffer?r=Buffer.from(e):ArrayBuffer.isView(e)?r=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(r=Buffer.from(e),i.readOnly=!1),r}try{const e=require("bufferutil"),t=e.BufferUtil||e;r.bufferUtil.exports={concat:u,mask(e,r,f,u,o){o<48?n(e,r,f,u,o):t.mask(e,r,f,u,o)},toArrayBuffer:s,toBuffer:i,unmask(e,r){e.length<32?o(e,r):t.unmask(e,r)}}}catch(e){r.bufferUtil.exports={concat:u,mask:n,toArrayBuffer:s,toBuffer:i,unmask:o}}return r.bufferUtil.exports};
