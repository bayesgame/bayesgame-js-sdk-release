"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../../../../../../_virtual/utils.js");!function(r){function t(r){if("number"==typeof r&&(r=r.toString()),"string"!=typeof r)throw new Error("Color should be defined as hex string");var t=r.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+r);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(r){return[r,r]})))),6===t.length&&t.push("F","F");var e=parseInt(t.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:255&e,hex:"#"+t.slice(0,6).join("")}}r.getOptions=function(r){r||(r={}),r.color||(r.color={});var e=void 0===r.margin||null===r.margin||r.margin<0?4:r.margin,o=r.width&&r.width>=21?r.width:void 0,n=r.scale||4;return{width:o,scale:o?4:n,margin:e,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},r.getScale=function(r,t){return t.width&&t.width>=r+2*t.margin?t.width/(r+2*t.margin):t.scale},r.getImageWidth=function(t,e){var o=r.getScale(t,e);return Math.floor((t+2*e.margin)*o)},r.qrToImageData=function(t,e,o){for(var n=e.modules.size,i=e.modules.data,a=r.getScale(n,o),l=Math.floor((n+2*o.margin)*a),g=o.margin*a,f=[o.color.light,o.color.dark],c=0;c<l;c++)for(var h=0;h<l;h++){var s=4*(c*l+h),d=o.color.light;if(c>=g&&h>=g&&c<l-g&&h<l-g)d=f[i[Math.floor((c-g)/a)*n+Math.floor((h-g)/a)]?1:0];t[s++]=d.r,t[s++]=d.g,t[s++]=d.b,t[s]=d.a}}}(r.__exports),exports.default=r.__exports;
