"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../../../../@ethersproject_bytes@5.7.0/node_modules/@ethersproject/bytes/lib.esm/index.js"),r=require("../../../../../@ethersproject_logger@5.7.0/node_modules/@ethersproject/logger/lib.esm/index.js"),o=require("./_version.js");const t=new r.Logger(o.version);var n,s;function i(e,r,o,t,n){if(e===exports.Utf8ErrorReason.BAD_PREFIX||e===exports.Utf8ErrorReason.UNEXPECTED_CONTINUE){let e=0;for(let t=r+1;t<o.length&&o[t]>>6==2;t++)e++;return e}return e===exports.Utf8ErrorReason.OVERRUN?o.length-r-1:0}exports.UnicodeNormalizationForm=void 0,(n=exports.UnicodeNormalizationForm||(exports.UnicodeNormalizationForm={})).current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD",exports.Utf8ErrorReason=void 0,(s=exports.Utf8ErrorReason||(exports.Utf8ErrorReason={})).UNEXPECTED_CONTINUE="unexpected continuation byte",s.BAD_PREFIX="bad codepoint prefix",s.OVERRUN="string overrun",s.MISSING_CONTINUE="missing continuation byte",s.OUT_OF_RANGE="out of UTF-8 range",s.UTF16_SURROGATE="UTF-16 surrogate",s.OVERLONG="overlong representation",Object.freeze({error:function(e,r,o,n,s){return t.throwArgumentError(`invalid codepoint at offset ${r}; ${e}`,"bytes",o)},ignore:i,replace:function(e,r,o,t,n){return e===exports.Utf8ErrorReason.OVERLONG?(t.push(n),0):(t.push(65533),i(e,r,o))}}),exports.toUtf8Bytes=function(r,o=exports.UnicodeNormalizationForm.current){o!=exports.UnicodeNormalizationForm.current&&(t.checkNormalize(),r=r.normalize(o));let n=[];for(let e=0;e<r.length;e++){const o=r.charCodeAt(e);if(o<128)n.push(o);else if(o<2048)n.push(o>>6|192),n.push(63&o|128);else if(55296==(64512&o)){e++;const t=r.charCodeAt(e);if(e>=r.length||56320!=(64512&t))throw new Error("invalid utf-8 string");const s=65536+((1023&o)<<10)+(1023&t);n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(63&s|128)}else n.push(o>>12|224),n.push(o>>6&63|128),n.push(63&o|128)}return e.arrayify(n)};
