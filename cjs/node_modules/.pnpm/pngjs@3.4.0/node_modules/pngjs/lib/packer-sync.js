"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("zlib"),r=require("./constants.js");require("./packer.js");var t=require("../../../../../../_virtual/packer.js");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=!0,i=a(e).default;i.deflateSync||(n=!1);var s=r.default,u=t.packer.exports;exports.default=function(e,r){if(!n)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");var t=new u(r||{}),a=[];a.push(new Buffer(s.PNG_SIGNATURE)),a.push(t.packIHDR(e.width,e.height)),e.gamma&&a.push(t.packGAMA(e.gamma));var p=t.filterData(e.data,e.width,e.height),o=i.deflateSync(p,t.getDeflateOptions());if(p=null,!o||!o.length)throw new Error("bad png - invalid compressed data response");return a.push(t.packIDAT(o)),a.push(t.packIEND()),Buffer.concat(a)};
