"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./paeth-predictor.js").default;var e={0:function(r,e,t,a,f){for(var n=0;n<t;n++)a[f+n]=r[e+n]},1:function(r,e,t,a,f,n){for(var o=0;o<t;o++){var i=o>=n?r[e+o-n]:0,u=r[e+o]-i;a[f+o]=u}},2:function(r,e,t,a,f){for(var n=0;n<t;n++){var o=e>0?r[e+n-t]:0,i=r[e+n]-o;a[f+n]=i}},3:function(r,e,t,a,f,n){for(var o=0;o<t;o++){var i=o>=n?r[e+o-n]:0,u=e>0?r[e+o-t]:0,v=r[e+o]-(i+u>>1);a[f+o]=v}},4:function(e,t,a,f,n,o){for(var i=0;i<a;i++){var u=i>=o?e[t+i-o]:0,v=t>0?e[t+i-a]:0,c=t>0&&i>=o?e[t+i-(a+o)]:0,s=e[t+i]-r(u,v,c);f[n+i]=s}}},t={0:function(r,e,t){for(var a=0,f=e+t,n=e;n<f;n++)a+=Math.abs(r[n]);return a},1:function(r,e,t,a){for(var f=0,n=0;n<t;n++){var o=n>=a?r[e+n-a]:0,i=r[e+n]-o;f+=Math.abs(i)}return f},2:function(r,e,t){for(var a=0,f=e+t,n=e;n<f;n++){var o=e>0?r[n-t]:0,i=r[n]-o;a+=Math.abs(i)}return a},3:function(r,e,t,a){for(var f=0,n=0;n<t;n++){var o=n>=a?r[e+n-a]:0,i=e>0?r[e+n-t]:0,u=r[e+n]-(o+i>>1);f+=Math.abs(u)}return f},4:function(e,t,a,f){for(var n=0,o=0;o<a;o++){var i=o>=f?e[t+o-f]:0,u=t>0?e[t+o-a]:0,v=t>0&&o>=f?e[t+o-(a+f)]:0,c=e[t+o]-r(i,u,v);n+=Math.abs(c)}return n}};exports.default=function(r,a,f,n,o){var i;if("filterType"in n&&-1!==n.filterType){if("number"!=typeof n.filterType)throw new Error("unrecognised filter types");i=[n.filterType]}else i=[0,1,2,3,4];16===n.bitDepth&&(o*=2);for(var u=a*o,v=0,c=0,s=new Buffer((u+1)*f),l=i[0],p=0;p<f;p++){if(i.length>1)for(var h=1/0,b=0;b<i.length;b++){var y=t[i[b]](r,c,u,o);y<h&&(l=i[b],h=y)}s[v]=l,v++,e[l](r,c,u,s,v,o),v+=u,c+=u}return s};
