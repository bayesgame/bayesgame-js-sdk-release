"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../../../../../_virtual/sync-reader.js"),r=e.syncReader.exports=function(e){this._buffer=e,this._reads=[]};r.prototype.read=function(e,r){this._reads.push({length:Math.abs(e),allowLess:e<0,func:r})},r.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){var e=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=e.length||e.allowLess))break;this._reads.shift();var r=this._buffer;this._buffer=r.slice(e.length),e.func.call(this,r.slice(0,e.length))}return this._reads.length>0?new Error("There are some read requests waitng on finished stream"):this._buffer.length>0?new Error("unrecognised content at end of stream"):void 0},exports.default=e.syncReader.exports;
