"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../../../../@ethersproject_bytes@5.7.0/node_modules/@ethersproject/bytes/lib.esm/index.js"),r=require("../../../../../@ethersproject_keccak256@5.7.0/node_modules/@ethersproject/keccak256/lib.esm/index.js"),t=require("../../../../../@ethersproject_logger@5.7.0/node_modules/@ethersproject/logger/lib.esm/index.js"),s=require("./_version.js"),o=require("../../../../../@ethersproject_bignumber@5.7.0/node_modules/@ethersproject/bignumber/lib.esm/bignumber.js");const n=new t.Logger(s.version);function i(t){e.isHexString(t,20)||n.throwArgumentError("invalid address","address",t);const s=(t=t.toLowerCase()).substring(2).split(""),o=new Uint8Array(40);for(let e=0;e<40;e++)o[e]=s[e].charCodeAt(0);const i=e.arrayify(r.keccak256(o));for(let e=0;e<40;e+=2)i[e>>1]>>4>=8&&(s[e]=s[e].toUpperCase()),(15&i[e>>1])>=8&&(s[e+1]=s[e+1].toUpperCase());return"0x"+s.join("")}const a={};for(let e=0;e<10;e++)a[String(e)]=String(e);for(let e=0;e<26;e++)a[String.fromCharCode(65+e)]=String(10+e);const d=Math.floor((g=9007199254740991,Math.log10?Math.log10(g):Math.log(g)/Math.LN10));var g;exports.getAddress=function(e){let r=null;if("string"!=typeof e&&n.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),r=i(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==e&&n.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let r=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>a[e])).join("");for(;r.length>=d;){let e=r.substring(0,d);r=parseInt(e,10)%97+r.substring(e.length)}let t=String(98-parseInt(r,10)%97);for(;t.length<2;)t="0"+t;return t}(e)&&n.throwArgumentError("bad icap checksum","address",e),r=o._base36To16(e.substring(4));r.length<40;)r="0"+r;r=i("0x"+r)}else n.throwArgumentError("invalid address","address",e);return r};
